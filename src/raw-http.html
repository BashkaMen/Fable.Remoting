
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Raw Http Communication Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-enhanced-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="upload-and-download.html" />
    
    
    <link rel="prev" href="dependency-injection.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Setup Server</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="suave.html">
            
                <a href="suave.html">
            
                    
                    Setup Suave
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="aspnet-core.html">
            
                <a href="aspnet-core.html">
            
                    
                    Setup Asp.NET Core
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="giraffe.html">
            
                <a href="giraffe.html">
            
                    
                    Setup Giraffe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="saturn.html">
            
                <a href="saturn.html">
            
                    
                    Setup Saturn
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Setup Client</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="client.html">
            
                <a href="client.html">
            
                    
                    Setup Fable Client
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Dotnet Client</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="dotnet-client.html">
            
                <a href="dotnet-client.html">
            
                    
                    Getting Started from .NET
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="dotnet-csharp.html">
            
                <a href="dotnet-csharp.html">
            
                    
                    C# Support
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="dotnet-integration-tests.html">
            
                <a href="dotnet-integration-tests.html">
            
                    
                    Asp.NET Core Integration Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="dotnet-client-limitations.html">
            
                <a href="dotnet-client-limitations.html">
            
                    
                    Limitations and Workaround
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Advanced</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="route-builder.html">
            
                <a href="route-builder.html">
            
                    
                    Custom Route Paths
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="error-handling.html">
            
                <a href="error-handling.html">
            
                    
                    Error Handling
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="modeling-authentication.html">
            
                <a href="modeling-authentication.html">
            
                    
                    Modeling Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="implicit-authentication.html">
            
                <a href="implicit-authentication.html">
            
                    
                    Implicit Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="refresh-auth-tokens.html">
            
                <a href="refresh-auth-tokens.html">
            
                    
                    Refreshing Access Tokens
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="request-context.html">
            
                <a href="request-context.html">
            
                    
                    Accessing Request Context
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="binary-serialization.html">
            
                <a href="binary-serialization.html">
            
                    
                    Binary Serialization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="dependency-injection.html">
            
                <a href="dependency-injection.html">
            
                    
                    Functional Dependency Injection
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.9" data-path="raw-http.html">
            
                <a href="raw-http.html">
            
                    
                    Raw Http Communication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.10" data-path="upload-and-download.html">
            
                <a href="upload-and-download.html">
            
                    
                    File Upload And Download
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.11" data-path="multiple-protocols.html">
            
                <a href="multiple-protocols.html">
            
                    
                    Using Multiple Protocols
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.12" data-path="docs.html">
            
                <a href="docs.html">
            
                    
                    Type-Safe Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.13" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Misc</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="change-log.html">
            
                <a href="change-log.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="migrate.html">
            
                <a href="migrate.html">
            
                    
                    Migration 2.x to 3.x
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="troubleshoot.html">
            
                <a href="troubleshoot.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="credits.html">
            
                <a href="credits.html">
            
                    
                    Credits
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Raw Http Communication</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="raw-http-communication">Raw Http Communication</h1>
<p>Clients other than Fable can communicate with a server using Fable.Remoting quite easily using raw http requests. For that, we have to understand how the functions of the record implementation is translated to Http. These functions can have the following pattern:</p>
<pre><code class="lang-fs">Async&lt;<span class="hljs-symbol">&apos;A</span>&gt; 
<span class="hljs-symbol">&apos;A</span> -&gt; Async&lt;<span class="hljs-symbol">&apos;B</span>&gt;
<span class="hljs-symbol">&apos;A</span> -&gt; <span class="hljs-symbol">&apos;B</span> -&gt; Async&lt;<span class="hljs-symbol">&apos;C</span>&gt;
<span class="hljs-symbol">&apos;A</span> -&gt; <span class="hljs-symbol">&apos;B</span> -&gt; <span class="hljs-symbol">&apos;C</span> -&gt; Async&lt;<span class="hljs-symbol">&apos;D</span>&gt;
<span class="hljs-comment">// etc.</span>
</code></pre>
<p>Lets take the following protocol and implementation as an example:</p>
<pre><code class="lang-fs"><span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">ListsRecord</span> </span>= {
    firstList : int list 
    secondList : int list  
}

<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">IServer</span> </span>= {
    getNumbers : Async&lt;int list&gt;  
    concatLists : ListsRecord -&gt; Async&lt;int list&gt; 
}
</code></pre>
<p>Notice that the field <code>getNumbers</code> is a simple async value and does not require input parameters, while <code>concatLists</code> needs a record as input. Now let us provide a simple implementation and run the server:</p>
<pre><code class="lang-fs"><span class="hljs-keyword">let</span> server = { 
    getNumbers = async { <span class="hljs-keyword">return</span> [<span class="hljs-number">1</span> .. <span class="hljs-number">5</span>] }
    concatLists = <span class="hljs-keyword">fun</span> input -&gt; async {
        <span class="hljs-keyword">return</span> List.concat [input.firstList; input.secondList]
    }
}

<span class="hljs-keyword">let</span> webApp = 
    Remoting.createApi()
    |&gt; Remoting.fromValue server 
    |&gt; Remoting.buildWebPart 

startWebServer defaultConfig webApp
</code></pre>
<p>Now, to invoke <code>getNumbers</code> using raw http request you can send a <code>GET</code> request (because no parameters are required) to the default field url <code>/IServer/getNumbers</code>:</p>
<p><img src="imgs/getNumbers.png" alt="getNumbers"></p>
<p>As simple as that. This rule of <code>No parameters &lt;=&gt; GET request</code> also applies to functions where the input is <code>unit</code>, i.e. functions of type <code>unit -&gt; Async&lt;&apos;t&gt;</code>. </p>
<p>Now moving on to the function <code>concatLists</code>, it has one parameter of type <code>ListsRecord</code>. By convention, we will send <code>POST</code> requests with the parameters as a JSON array that contains the serializable data. The entries of the array correspond with the arguments of the function:</p>
<p><img src="imgs/concatLists.png" alt="concatLists"></p>
<p>Functions of a single parameter such as <code>concatLists</code> are special: you don&apos;t always need to wrap their parameter in an array, so it will work as well when you send just the serializable input object without an array:</p>
<p><img src="imgs/singleParam.png" alt="singleParam"></p>
<p>This rule only applies when the function has a single parameter and when the parameter is not array-like is serialized form, this means the rule doesn&apos;t apply to arrays, lists or tuples because of ambiguity and you would have to wrap these arguments in an array just like in the situation with multiple parameters.   </p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="dependency-injection.html" class="navigation navigation-prev " aria-label="Previous page: Functional Dependency Injection">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="upload-and-download.html" class="navigation navigation-next " aria-label="Next page: File Upload And Download">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Raw Http Communication","level":"5.9","depth":1,"next":{"title":"File Upload And Download","level":"5.10","depth":1,"path":"src/upload-and-download.md","ref":"src/upload-and-download.md","articles":[]},"previous":{"title":"Functional Dependency Injection","level":"5.8","depth":1,"path":"src/dependency-injection.md","ref":"src/dependency-injection.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["enhanced-katex"],"pluginsConfig":{"enhanced-katex":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css"}},"file":{"path":"src/raw-http.md","mtime":"2019-09-09T21:18:01.005Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-10-07T18:07:03.987Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

